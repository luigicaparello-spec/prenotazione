<!DOCTYPE html>
<html lang="it">
<head>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-27B34MZJ5D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-27B34MZJ5D');
</script>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prenotazioni — Casa Luigi</title>

  <!-- PayPal SDK -->
  <script 
    src="https://www.paypal.com/sdk/js?client-id=BAAGX03WrER82CZMeusOaNKvKygI5SwJHKBd25j46YqkC9KPDP6fXuWXAza2Ew9yLFpGPw66DgOQskwMjs&components=hosted-buttons&disable-funding=venmo&currency=EUR">
  </script>
  
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1088181475116856"
     crossorigin="anonymous"></script>

  <style>
    :root{
      --bg: linear-gradient(135deg,#f7f9fc,#e3eeff);
      --card: #fff;
      --muted:#666;
      --accent:#0078D4;
      --success:#25D366;
      --radius:12px;
      --maxw:420px;
    }
    * {
      box-sizing: border-box;
    }
    html,body{height:100%;margin:0;}
    body{
      font-family: Inter, Arial, sans-serif;
      background: var(--bg);
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:20px;
      min-height:100vh;
      padding-top:40px;
    }

    .page {
      width:100%;
      max-width:var(--maxw);
    }

    .card {
      background:var(--card);
      border-radius:16px;
      padding:24px;
      box-shadow:0 6px 20px rgba(0,0,0,0.08);
      overflow:hidden;
    }

    /* slider */
    .slider { 
      width:100%; 
      height:250px; 
      border-radius:var(--radius); 
      overflow:hidden; 
      margin-bottom:12px;
      position:relative;
    }
    .slides { 
      display:flex; 
      width:100%; 
      height:100%; 
      transition:transform .9s ease; 
    }
    .slide { 
      width:100%; 
      height:100%; 
      object-fit:cover; 
      flex-shrink:0; 
    }

    /* dots */
    .dots { 
      display:flex; 
      justify-content:center; 
      gap:8px; 
      margin:10px 0 20px 0; 
    }
    .dot { 
      width:10px; 
      height:10px; 
      border-radius:50%; 
      background:#d0d0d0; 
      cursor:pointer; 
      transition:all .2s; 
    }
    .dot.active { 
      background:var(--accent); 
      transform:scale(1.2); 
    }

    h1 { 
      font-size:1.4rem; 
      margin:8px 0 8px; 
      color:#111; 
      line-height:1.3;
    }
    p.lead { 
      margin:0 0 16px; 
      color:var(--muted); 
      font-size:0.95rem; 
      line-height:1.5;
    }

    label.small{ 
      font-size:0.9rem; 
      color:#333; 
      display:block; 
      margin-top:12px; 
      margin-bottom:6px;
      font-weight:600; 
      text-align:left; 
    }

    .row { 
      display:flex; 
      gap:12px; 
      flex-wrap:wrap;
    }
    .col { 
      flex:1; 
      min-width:140px;
    }

    input[type="date"], select {
      width:100%;
      padding:12px;
      border-radius:8px;
      border:1px solid #d6d6d6;
      font-size:0.95rem;
      box-sizing:border-box;
      transition: border-color 0.2s;
    }
    
    input[type="date"]:focus, select:focus {
      outline:none;
      border-color:var(--accent);
    }

    .controls { margin-top:12px; }

    .pricing {
      margin-top:20px;
      background:linear-gradient(180deg,#fbfdff,#f3f8ff);
      border-radius:10px;
      padding:16px;
      text-align:left;
      color:#123;
    }

    .pricing .row-item { 
      display:flex; 
      justify-content:space-between; 
      margin:8px 0; 
      font-size:0.95rem; 
    }
    .pricing .muted { 
      color:var(--muted); 
      font-size:0.85rem; 
      line-height:1.5;
    }

    .summary {
      margin-top:16px;
      padding:14px;
      border-radius:8px;
      background:#fff;
      border:1px solid #eef4ff;
    }
    
    .summary > div {
      margin:6px 0;
    }

    .total { 
      font-weight:700; 
      font-size:1.1rem; 
      color:#111; 
    }

    .buttons { 
      margin-top:20px; 
      display:flex; 
      flex-direction:column; 
      gap:12px; 
    }
    .btn {
      display:inline-block;
      padding:14px 16px;
      border-radius:10px;
      color:#fff;
      text-decoration:none;
      text-align:center;
      font-weight:600;
      font-size:0.95rem;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .btn:active {
      transform: scale(0.98);
    }
    .btn.whatsapp { 
      background:var(--success);
      box-shadow: 0 2px 8px rgba(37,211,102,0.3);
    }
    .btn.email { 
      background:var(--accent);
      box-shadow: 0 2px 8px rgba(0,120,212,0.3);
    }

    .paypal-container { 
      margin-top:10px; 
    }
    
    .ad-container {
      margin: 20px 0;
      padding: 16px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 12px;
      border: 1px solid #dee2e6;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .ad-label {
      font-size: 0.75rem;
      color: #6c757d;
      text-align: center;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
    }

    .note {
      margin-top:16px;
      font-size:0.85rem;
      color:var(--muted);
      line-height:1.5;
      padding:12px;
      background:#f9fafb;
      border-radius:8px;
    }
    
    footer {
      margin-top:16px; 
      text-align:center; 
      font-size:0.85rem; 
      color:var(--muted);
      padding-top:12px;
      border-top:1px solid #eee;
    }
    
    footer a {
      color:var(--accent);
      text-decoration:none;
    }
    
    footer a:hover {
      text-decoration:underline;
    }

    /* Responsive per telefono */
    @media (max-width:480px){
      body {
        padding:12px;
        align-items:flex-start;
      }
      
      .page {
        padding:0;
      }
      
      .card {
        padding:16px;
        border-radius:12px;
      }
      
      .slider {
        height:200px;
        margin-left:-16px;
        margin-right:-16px;
        width:calc(100% + 32px);
        border-radius:0;
      }
      
      h1 {
        font-size:1.2rem;
      }
      
      p.lead {
        font-size:0.9rem;
      }
      
      label.small {
        font-size:0.85rem;
        margin-top:10px;
      }
      
      input[type="date"], select {
        padding:10px;
        font-size:0.9rem;
      }
      
      .pricing {
        padding:12px;
        margin-top:16px;
      }
      
      .pricing .row-item {
        font-size:0.9rem;
      }
      
      .summary {
        padding:12px;
      }
      
      .btn {
        padding:12px 14px;
        font-size:0.9rem;
      }
      
      .note {
        font-size:0.8rem;
        padding:10px;
      }
      
      footer {
        font-size:0.8rem;
      }
    }
    
    /* Tablet / schermi medi */
    @media (min-width:481px) and (max-width:768px){
      .page {
        max-width:540px;
      }
      
      .slider {
        height:280px;
      }
    }
    
    /* Desktop grande */
    @media (min-width:769px){
      body {
        padding:40px 20px;
        padding-top:60px;
      }
      
      .page {
        max-width:480px;
      }
      
      .card {
        padding:32px;
      }
      
      .slider {
        height:300px;
      }
      
      h1 {
        font-size:1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="card">

      <!-- SLIDER -->
      <div class="slider" id="slider">
        <div class="slides" id="slides">
          <img class="slide" src="foto1.webp" alt="Casa Luigi 1">
          <img class="slide" src="foto2.avif" alt="Casa Luigi 2">
          <img class="slide" src="foto3.avif" alt="Casa Luigi 3">
          <img class="slide" src="foto4.avif" alt="Casa Luigi 4">
        </div>
      </div>
      <div class="dots" id="dots"></div>

      <h1>Prenota il tuo soggiorno</h1>
      <p class="lead">Controlla le date, scegli il numero di ospiti e visualizza il prezzo stimato. Minimo 2 notti.</p>

      <!-- date + guests -->
      <div class="controls">
        <label class="small" for="checkin">Check-in</label>
        <input id="checkin" type="date" />

        <label class="small" for="checkout">Check-out</label>
        <input id="checkout" type="date" />

        <label class="small" for="guests">Ospiti</label>
        <select id="guests">
          <option value="1">1 persona</option>
          <option value="2">2 persone</option>
          <option value="3">3 persone</option>
          <option value="4">4 persone</option>
        </select>
      </div>

      <!-- pricing info -->
      <div class="pricing" aria-hidden="false">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
          <div style="font-weight:700">Tariffe stagionali (per notte)</div>
          <div class="muted" style="font-size:0.85rem">Prezzi per persona</div>
        </div>

        <div class="row-item"><div>1 persona</div><div><strong>€75</strong></div></div>
        <div class="row-item"><div>2 persone</div><div><strong>€87</strong></div></div>
        <div class="row-item"><div>3–4 persone</div><div><strong>€126</strong></div></div>

        <hr style="border:none;border-top:1px dashed #e2e8f0;margin:12px 0">

        <div class="muted" style="font-weight:600; margin-bottom:6px;">Condizioni di soggiorno</div>
        <div class="muted">
          • Soggiorno minimo: <strong>2 notti</strong>.<br>
          • Sconto <strong>13%</strong> per soggiorni di almeno <strong>7 notti</strong>.<br>
          • Sconto <strong>43%*</strong> per soggiorni di almeno <strong>30 notti</strong>.<br>
          <span style="font-size:0.8rem">*Per affitti superiori a 1 mese è richiesto un contratto specifico; il canone sarà definito in base alla durata e ai requisiti richiesti.</span>
        </div>
      </div>

      <!-- summary / calculator -->
      <div class="summary" id="summary">
        <div style="display:flex;justify-content:space-between"><div class="muted">Notti</div><div id="nights">–</div></div>
        <div style="display:flex;justify-content:space-between"><div class="muted">Tariffa per notte</div><div id="nightRate">–</div></div>
        <div style="display:flex;justify-content:space-between"><div class="muted">Sconto applicato</div><div id="discount">–</div></div>
        <div style="display:flex;justify-content:space-between; margin-top:10px; padding-top:10px; border-top:1px solid #eee;"><div class="muted">Totale base</div><div class="total" id="total">–</div></div>
        <div style="display:flex;justify-content:space-between; margin-top:6px;"><div class="muted">Commissione PayPal (3.5%)</div><div id="paypalFee">–</div></div>
        <div style="display:flex;justify-content:space-between; margin-top:8px; padding-top:8px; border-top:2px solid #0078D4;"><div style="font-weight:700; color:#111;">Totale con PayPal</div><div class="total" style="color:#0078D4;" id="totalWithPaypal">–</div></div>
      </div>

      <!-- buttons -->
      <div class="buttons">
        <a id="whatsappBtn" class="btn whatsapp" target="_blank" href="#">Contattami su WhatsApp</a>
        <a id="emailBtn" class="btn email" target="_blank" href="#">Invia richiesta via Email</a>
      </div>
      
      <div class="paypal-container" id="paypal-container-KNC739BU5PTYJ"></div>

      <div class="note">
        <strong>Nota:</strong> per soggiorni superiori a un mese verrà richiesto di sottoscrivere un contratto concordato; il prezzo finale potrà variare in base alla durata e ai requisiti necessari.
      </div>
      
      <!-- Google AdSense -->
      <div class="ad-container">
        <div style="width: 100%;">
          <div class="ad-label">Pubblicità</div>
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-1088181475116856"
               data-ad-slot="auto"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
        </div>
      </div>

      <footer>
        © 2025 Casa Luigi — <a href="https://maps.app.goo.gl/8UjpskqT4CEAgex68" target="_blank">Visualizza su Google Maps</a>
      </footer>
    </div>
  </div>

  <script>
    // PAYPAL hosted button
    if (window.paypal && paypal.HostedButtons) {
      try {
        paypal.HostedButtons({ hostedButtonId: "KNC739BU5PTYJ" }).render("#paypal-container-KNC739BU5PTYJ");
      } catch(e){ console.warn('PayPal render error', e); }
    }

    // IMPOSTAZIONI
    const rates = {
      1: 75,
      2: 87,
      "3-4": 126
    };
    const discount7 = 0.13;
    const discount30 = 0.43;
    const minNights = 2;
    const paypalFee = 0.035; // 3.5%

    // elementi
    const checkin = document.getElementById('checkin');
    const checkout = document.getElementById('checkout');
    const guests = document.getElementById('guests');
    const nightsEl = document.getElementById('nights');
    const nightRateEl = document.getElementById('nightRate');
    const discountEl = document.getElementById('discount');
    const totalEl = document.getElementById('total');
    const paypalFeeEl = document.getElementById('paypalFee');
    const totalWithPaypalEl = document.getElementById('totalWithPaypal');
    const whatsappBtn = document.getElementById('whatsappBtn');
    const emailBtn = document.getElementById('emailBtn');

    // imposta min date a oggi
    const today = new Date().toISOString().split('T')[0];
    checkin.min = today;
    checkout.min = today;

    function parseDate(s){ return s ? new Date(s + 'T00:00:00') : null; }
    function daysBetween(a,b){
      if(!a||!b) return 0;
      const ms = b - a;
      return Math.round(ms / (1000*60*60*24));
    }

    function getNightlyRate(guestCount){
      if(guestCount == 1) return rates[1];
      if(guestCount == 2) return rates[2];
      if(guestCount >=3) return rates["3-4"];
      return rates[1];
    }

    function compute() {
      const a = parseDate(checkin.value);
      const b = parseDate(checkout.value);
      const gc = parseInt(guests.value,10);
      if(!a || !b){ 
        nightsEl.textContent='–'; 
        nightRateEl.textContent='–'; 
        discountEl.textContent='–'; 
        totalEl.textContent='–'; 
        paypalFeeEl.textContent='–';
        totalWithPaypalEl.textContent='–';
        return; 
      }

      if(b <= a){
        nightsEl.textContent='0';
        nightRateEl.textContent='–';
        discountEl.textContent='–';
        totalEl.textContent='Seleziona check-out successivo';
        paypalFeeEl.textContent='–';
        totalWithPaypalEl.textContent='–';
        return;
      }

      let nights = daysBetween(a,b);
      if(nights < minNights){
        nightsEl.textContent = `${nights} (minimo ${minNights} notti)`;
      } else {
        nightsEl.textContent = nights;
      }

      const rate = getNightlyRate(gc);
      nightRateEl.textContent = `€ ${rate.toFixed(2)}`;

      let subtotal = rate * nights;

      let appliedDiscount = 0;
      if(nights >= 30){
        appliedDiscount = discount30;
      } else if(nights >= 7){
        appliedDiscount = discount7;
      }
      const discountAmt = subtotal * appliedDiscount;
      const total = subtotal - discountAmt;

      discountEl.textContent = appliedDiscount>0 ? `${(appliedDiscount*100).toFixed(0)}% (-€ ${discountAmt.toFixed(2)})` : 'Nessuno';
      totalEl.textContent = `€ ${total.toFixed(2)}`;
      
      // Calcola commissione PayPal e totale con PayPal
      const paypalFeeAmt = total * paypalFee;
      const totalWithPaypal = total + paypalFeeAmt;
      paypalFeeEl.textContent = `+€ ${paypalFeeAmt.toFixed(2)}`;
      totalWithPaypalEl.textContent = `€ ${totalWithPaypal.toFixed(2)}`;

      const formatted = d => {
        if(!d) return '';
        const dd = d.split('-');
        return `${dd[2]}/${dd[1]}/${dd[0]}`;
      };
      const msg = `Ciao Luigi, vorrei prenotare dal ${formatted(checkin.value)} al ${formatted(checkout.value)} per ${gc} persona/e. Totale stimato: € ${total.toFixed(2)}. È disponibile?`;
      const phone = '393382661198';
      whatsappBtn.href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
      emailBtn.href = `mailto:luigi.caparello@gmail.com?subject=Richiesta%20prenotazione&body=${encodeURIComponent(msg)}`;
    }

    checkin.addEventListener('change', () => {
      if(checkin.value){
        checkout.min = checkin.value;
        if(checkout.value && checkout.value <= checkin.value){
          const d = new Date(checkin.value + 'T00:00:00');
          d.setDate(d.getDate() + 1);
          checkout.value = d.toISOString().split('T')[0];
        }
      }
      compute();
    });
    checkout.addEventListener('change', compute);
    guests.addEventListener('change', compute);

    compute();

    // SLIDER
    (function(){
      const slides = document.getElementById('slides');
      const slideEls = document.querySelectorAll('.slide');
      const dotsContainer = document.getElementById('dots');
      const total = slideEls.length;
      let idx = 0;
      let interval;

      for(let i=0;i<total;i++){
        const d = document.createElement('div');
        d.className = 'dot' + (i===0 ? ' active' : '');
        d.dataset.index = i;
        d.addEventListener('click', () => {
          idx = i;
          show();
          reset();
        });
        dotsContainer.appendChild(d);
      }
      const dots = document.querySelectorAll('.dot');

      function show(){
        slides.style.transform = `translateX(-${idx*100}%)`;
        dots.forEach((el,i)=> el.classList.toggle('active', i===idx));
      }

      function next(){
        idx = (idx + 1) % total;
        show();
      }

      function start(){
        interval = setInterval(next, 3500);
      }
      function reset(){
        clearInterval(interval);
        start();
      }
      start();
    })();
    
    // Inizializza Google AdSense
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</body>
</html>



